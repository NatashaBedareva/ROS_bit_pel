# AutoRace. Решение Битовые пельмени
## Основные использованные пакеты ROS 2
1. **rclpy** - Python клиентская библиотека ROS 2
2. **std_msgs** - Стандартные типы сообщений ROS (Empty, String)
3. **geometry_msgs** - Геометрические типы сообщений (Twist)
4. **sensor_msgs** - Типы сообщений для сенсоров (Image)
5. **nav_msgs** - Типы сообщений для навигации (Odometry)
6. **rcl_interfaces** - Интерфейсы для работы с параметрами (ParameterDescriptor, ParameterType)
7. **cv_bridge** - Конвертация между ROS Image и OpenCV изображениями

## Дополнительные пакеты
8. **tf_transformations** - Утилиты для работы с преобразованиями координат (euler_from_quaternion)

## Зависимости Python
9. **OpenCV (cv2)** - Компьютерное зрение для обработки изображений
10. **NumPy** - Численные вычисления и работа с массивами

## Разработанные компоненты

### Основной узел ROS: Follow_Trace_Node

#### 1. Система управления движением
- **PID-регулятор** для плавного следования по центру дороги
- **Адаптивная система скорости** с уменьшением скорости на поворотах
- **Механизм восстановления** при потере линии слежения

#### 2. Обработка компьютерного зрения

##### Детекция линий дорожной разметки:
- **Метод `_find_yellow_line`** - обнаружение желтой линии с использованием:
  - Преобразования в HSV цветовое пространство
  - Морфологических операций для очистки изображения
  - Контурного анализа для определения правого края желтой линии

- **Метод `_find_white_line`** - обнаружение белой линии с использованием:
  - Адаптивной бинаризации по порогу яркости
  - Комбинации grayscale и HSV методов
  - Контурного анализа для определения левого края белой линии

##### Перспективное преобразование:
- **Метод `_warpPerspective`** - преобразование вида "сбоку" в вид "сверху"
- Настраиваемые области интереса для лучшего обзора дороги

#### 3. Система обработки перекрестков

##### Управление остановками:
- **Детекция знака** с временной остановкой на 3 секунды
- **Интеллектуальный игнорирование** знака после первой остановки
- **Визуализация состояния** остановки

##### Определение направления:
- Интеграция с модулем `traffic_direction` для анализа знаков направления
- **Автоматическое определение** поворота (налево/направо)
- **Резервная логика** при невозможности определения направления

#### 4. Интеграция с внешними модулями

##### Модуль светофоров (`traffic_light`):
- Обработка сигналов светофора на уровне задачи 0
- Управление началом движения

##### Модуль дорожных знаков (`traffic_direction`):
- Анализ знаков направления на перекрестках
- Определение требуемого маневра

##### Модуль логирования (`logger`):
- Структурированное логирование событий
- Разные уровни детализации информации

#### 5. Режим отладки (INFO_LEVEL):
- **Детальное отображение** линий и центров на изображении
- **Подписи** с параметрами работы
- **Окна статуса** для остановок, поворотов и поиска линии
